(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{18:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex flex-column min-vh-75 p-2"},[i("nav",{staticClass:"navbar navbar-expand-lg flex-grow-4 px-0"},[i("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.close_click}},[t._v("╳")]),t._v(" "),i("div",{staticClass:"flex-grow-1 justify-content-end text-right"},[t.save>0?i("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:t.save_click}},[t._v("儲存")]):t._e()])]),t._v(" "),i("div",{staticClass:"input-group py-2"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editorTitle,expression:"editorTitle"}],staticClass:"flex-fill",attrs:{type:"text"},domProps:{value:t.editorTitle},on:{input:[function(e){e.target.composing||(t.editorTitle=e.target.value)},t.title_input]}})]),t._v(" "),i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},on:{input:t.onEditorInput,ready:t.onEditorReady},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}})],1)};n._withStripped=!0;var a=i(25),s=i.n(a);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loader=e}var e,i,n;return e=t,(i=[{key:"upload",value:function(){return this.loader.file.then((function(t){return new Promise((function(e,i){var n=new FileReader;n.onload=function(){e({default:n.result})},n.onerror=function(){i(n.error)},n.readAsDataURL(t)}))}))}}])&&o(e.prototype,i),n&&o(e,n),t}(),l={name:"edit",data:function(){return{editorId:"",editorTitle:"",editor:s.a,editorData:"",editorConfig:{extraPlugins:[function(t){t.plugins.get("FileRepository").createUploadAdapter=function(t){return new r(t)}}]},save:0}},mounted:function(){},methods:{title_input:function(){this.save++},onEditorReady:function(t){this.save=0;var e=this.$route.params.id;if(""===e||void 0===e)this.$router.push("/");else if("new"===e)this.editorId="",this.editorTitle="",this.editorData="",this.save=0;else{this.editorId=e;var i=this.$store.getters.getDataItem(e);i?(this.editorTitle=i.title,this.editorData=i.content,this.save=Math.max(this.save-1,-1)):this.$router.push("/")}},onEditorInput:function(t){this.save=Math.min(this.save+1,1)},close_click:function(){this.save&&!confirm("尚未儲存是否離開")||(this.save=0,this.$router.push({name:"all"}))},save_click:function(){var t=""===this.editorId,e=t?this.$store.getters.guid:this.editorId;this.$store.commit("saveEditData",{add:t,id:e,title:this.editorTitle,content:this.editorData}),this.save=0,t&&(this.editorId=e,this.$router.push({name:"edit",params:{id:e}}))}}},u=i(4),d=Object(u.a)(l,n,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("標題")])])}],!1,null,"6800aa52",null);d.options.__file="src/vue/pages/Edit.vue";e.default=d.exports}}]);